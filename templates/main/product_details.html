{% extends 'base.html' %}
{% load static %}
{% block page-title %}
    <title>{{ product.name }}</title>
    <meta name="description"
          content="{{ product.description }}">
    <meta name="keywords"
          content="доставка лакокрасочных материалов, безналичная оплата лакокрасочная компания">
    <meta property="og:title" content="{{ product.name }}">
    <meta property="og:description"
          content="{{ product.description }}">

{% endblock %}
{% block product_details %}
    <nav class="main_container subcategory_menu navbar navbar bg-body-tertiary category_catalog">
        <div class="container-fluid">
            {#            <div class="navbar-collapse" id="navbarSupportedContent">#}
            {#                    <li class="btn-secondary nav-link dropdown-toggle"#}
            {#                        data-bs-toggle="dropdown"#}
            {#                        data-bs-auto-close="outside"#}
            {#                        aria-expanded="false" style="color: #1A4582; width: 40px"#}
            {#                        type="button"#}
            {#                    >#}
            {##}
            {##}
            {#                        КАТАЛОГ#}
            {#                    </li>#}
            {##}
            {#                    <ul class="dropdown-menu " style="width: 300px">#}
            {#                        <li class="accordion dropdown-item accordion-flush" id="catalogaccordion">#}
            {#                            {% for cat in allcategory %}#}
            {##}
            {#                                <div class="accordion-item">#}
            {#                                    <h2 class="accordion-header">#}
            {#                                        <button class="accordion-button collapsed" type="button"#}
            {#                                                data-bs-toggle="collapse"#}
            {#                                                data-bs-target="#section-{{ forloop.counter0 }}"#}
            {#                                                aria-expanded="false"#}
            {#                                                aria-controls="section-{{ forloop.counter0 }}"#}
            {#                                                style="color: #1A4582; background-color: #E6E6E6;">#}
            {#                                            {{ cat }}#}
            {#                                        </button>#}
            {##}
            {#                                    </h2>#}
            {#                                    {% for subcat in allsubcategory %}#}
            {#                                        {% if subcat.category == cat %}#}
            {#                                            <div id="section-{{ forloop.parentloop.counter0 }}"#}
            {#                                                 class="accordion-collapse collapse"#}
            {#                                                 aria-labelledby="headingOne" data-bs-parent="#catalogaccordion">#}
            {#                                                <div class="accordion-body">#}
            {#                                                    <a class="dropdown-item" style="color: #1A4582"#}
            {#                                                       href="{% url 'subcategory' category=cat subcategory=subcat %}">{{ subcat }}</a>#}
            {##}
            {#                                                </div>#}
            {#                                            </div>#}
            {#                                        {% endif %}#}
            {#                                    {% endfor %}#}
            {#                                </div>#}
            {#                            {% endfor %}#}
            {##}
            {#                        </li>#}
            {##}
            {##}
            {#                    </ul>#}
            {#            </div>#}
        </div>
    </nav>
    {% if product %}
        {#        <div id="product_details_category" class="container px-0 py-3 d-table-row collapse w-100">#}
        {#            <div class="category_line p-0 d-table-cell h-100 w-50"></div>#}
        {#            <span class="fs-2 px-5 d-table-cell text-nowrap category_line_title"#}
        {#                  style="font-family: 'Gotham Pro Medium',sans-serif;#}
        {#                color: #1A4582;#}
        {#            ">{% if product.subcategory %}{{ product.subcategory }} {% else%} {{ product.category }}{% endif %} </span>#}
        {#            <div class="category_line p-0 d-table-cell h-100 w-100"></div>#}
        {#        </div>#}
        <div onClick="javascript:history.go(-1);updateQty();" class="main_container"
             style="cursor: pointer; background-color: rgba(255,255,255,1)">
            <div class="position-absolute" style="right: 20px; top: 20px">
                {#                <svg class="t-popup__close-icon t-popup__close-icon_arrow" width="26px" height="26px"#}
                {#                     viewBox="0 0 26 26" version="1.1" xmlns="http://www.w3.org/2000/svg"#}
                {#                     xmlns:xlink="http://www.w3.org/1999/xlink">#}
                {#                    <path d="M10.4142136,5 L11.8284271,6.41421356 L5.829,12.414 L23.4142136,12.4142136 L23.4142136,14.4142136 L5.829,14.414 L11.8284271,20.4142136 L10.4142136,21.8284271 L2,13.4142136 L10.4142136,5 Z"#}
                {#                          fill="#000000"></path>#}
                {#                </svg>#}
                <svg class="t-popup__close-icon t-popup__close-icon_cross" width="23px" height="23px"
                     viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg"
                     xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g stroke="none" stroke-width="1" fill="#000000" fill-rule="evenodd">
                        <rect transform="translate(11.313708, 11.313708) rotate(-45.000000) translate(-11.313708, -11.313708) "
                              x="10.3137085" y="-3.6862915" width="2" height="30"></rect>
                        <rect transform="translate(11.313708, 11.313708) rotate(-315.000000) translate(-11.313708, -11.313708) "
                              x="10.3137085" y="-3.6862915" width="2" height="30"></rect>
                    </g>
                </svg>
            </div>
        </div>
        <div class="row main_container details_content" style="font-family: 'Circe',Arial,sans-serif;">
            <div class="col-12 col-lg-6 text-right d-flex flex-column justify-content-center wow fadeInUp delay-02s">
                <a href="{{ product.photo_url }}" class="w-100 mx-auto">
                    <img class="w-100" src="{{ product.photo_url }}" alt="{{ product.name }}"
                         style="object-fit: contain; max-height: 200px">
                </a>
                <div class="w-100 d-flex justify-content-center">
                    <h1
                            style="   overflow: hidden;
                                                                               display: -webkit-box;
                                                                               -webkit-line-clamp: 2; /* number of lines to show */
                                                                                       line-clamp: 2;
                                                                               -webkit-box-orient: vertical;"

                    ><strong>{% if product.vendor %}{{ product.vendor }} ® {% endif %}{{ product.name }}</strong></h1>
                </div>
                <div
                        class="d-flex flex-column justify-content-center align-items-center"
                        style=""
                >
                    <span itemProp="price" id="price"
                          data-id="{{ product.vendor_code }}"
                          class='text-left text-dark mb-0 mt-2 element-animation price'
                          style=" font-weight: 400; font-size: 22px;
                              overflow: hidden;
                                                   display: -webkit-box;
                                                   -webkit-line-clamp: 1; /* number of lines to show */
                                                           line-clamp: 1;
                                                   -webkit-box-orient: vertical;"
                    >
                        {% if not defaultweight %}
                            {{ product.packprices.first.price }} р.
                        {% else %}
                            {% for weight in product.packprices.all %}
                                {% if weight.id == defaultweight %}
                                    {{ weight.price }} р.
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </span>
                </div>
                {% if product.packprices.all|length > 1 %}

                    <div class="d-flex text-center justify-content-center my-4 element-animation "
                         aria-label="{{ product.name }}">
                        {% for weight in product.packprices.all %}

                            <button type="button"
                                    data-id="{{ product.vendor_code }}plus{{ weight.id }}"
                                    data-price="{{ weight.price }}"
                                    class="btn btn-secondary product_details_weight-select-button text-black"
                                    style="font-size: 18px; width: 60px; height: 60px;
                                            background-color: transparent;
                                            {% if not defaultweight %}
                                                {% if forloop.first %}
                                                    border-width: 2px;
                                                {% else %}
                                                    border-width: 1px;
                                                {% endif %}"
                                            {% else %}
                                                {% if weight.id == defaultweight %}
                                    border-width: 2px;
                                                {% else %}
                                    border-width: 1px;
                                                {% endif %}
                                            {% endif %}
                            ">{{ weight.weight }}</button>

                        {% endfor %}


                    </div>
                {% endif %}
                <div class="w-100 d-flex justify-content-center mt-4">
                    <button id="buy_button" onclick=''
                            class="buy_button w-75 text-decoration-none to_catalog_btn fw-bold d-flex align-items-center py-4 element-animation"
                            data-categoryurl="{% url 'category' category=product.category %}"
                            data-id="{{ product.vendor_code }}"
                            data-name="{{ product.name }}"
                            data-price="{{ product.packpricesprice }}"
                            data-weight=
                                    {% if defaultweight %}
                                        "{{ defaultweight }}"
                                    {% else %}
                                        "{{ product.packprices.first.id }}"
                                    {% endif %}
                    {#                    data-bs-toggle="modal" data-bs-target="#cartmodal" data-bs-dismiss="modal"#}
                    style="height: 15%; cursor: pointer"
                    >
                    <span type="button"
                          class="text-center mx-auto fs-4">Купить</span>
                    </button>
                </div>
            </div>
            <div class="col-12 col-lg-6 d-flex flex-column justify-content-around align-items-start mt-4">

                <div class="category_products_item" style="">
                    <span itemProp="description"
                          class=' text-wrap element-animation '
                          style=" font-family: Circe-Regular, sans-serif; font-weight: 600;
                                  {#overflow: hidden;#}
                                  {# display: -webkit-box;#}
                                  {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                  {#         line-clamp: 4;#}
                                  {# -webkit-box-orient: vertical;#}
                                  ">Описание:</span>
                    <span itemProp="description"
                          class=' text-wrap'
                          style=" font-family: Circe-Regular, sans-serif;
                                  {#overflow: hidden;#}
                                  {# display: -webkit-box;#}
                                  {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                  {#         line-clamp: 4;#}
                                  {# -webkit-box-orient: vertical;#}
                                  ">{{ product.description }}</span>
                </div>
                {% if product.composition %}
                    <div class="category_products_item element-animation d-flex flex-column py-4" style="">
                        <span itemProp="description"
                              class=' text-wrap element-animation '
                              style=" font-family: Circe-Regular, sans-serif; font-weight: 600;
                                      {#overflow: hidden;#}
                                      {# display: -webkit-box;#}
                                      {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                      {#         line-clamp: 4;#}
                                      {# -webkit-box-orient: vertical;#}
                                      ">Состав:</span>
                        <span itemProp="description"
                              class=' text-wrap element-animation '
                              style=" font-family: Circe-Regular, sans-serif;
                                      {#overflow: hidden;#}
                                      {# display: -webkit-box;#}
                                      {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                      {#         line-clamp: 4;#}
                                      {# -webkit-box-orient: vertical;#}
                                      ">{{ product.composition }}</span>
                    </div>

                {% endif %}
                {% if product.comments %}
                    <div class="main_container category_products_item element-animation d-flex flex-column py-4"
                         style="">
                        <span itemProp="description"
                              class=' text-wrap element-animation '
                              style=" font-family: Circe-Regular, sans-serif; font-weight: 600;
                                      {#overflow: hidden;#}
                                      {# display: -webkit-box;#}
                                      {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                      {#         line-clamp: 4;#}
                                      {# -webkit-box-orient: vertical;#}
                                      ">Примечание:</span>
                        <span itemProp="description"
                              class=' text-wrap element-animation '
                              style=" font-family: Circe-Regular, sans-serif;;
                                      {#overflow: hidden;#}
                                      {# display: -webkit-box;#}
                                      {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                      {#         line-clamp: 4;#}
                                      {# -webkit-box-orient: vertical;#}
                                      ">{{ product.comments }}</span>
                    </div>

                {% endif %}
                {% if product.consimption %}
                    <div class="category_products_item element-animation d-flex flex-column py-4" style="">
                        <span itemProp="description"
                              class=' text-wrap element-animation '
                              style=" font-family: Circe-Regular, sans-serif; font-weight: 600ж
                                      {#overflow: hidden;#}
                                      {# display: -webkit-box;#}
                                      {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                      {#         line-clamp: 4;#}
                                      {# -webkit-box-orient: vertical;#}
                                      ">Расход:</span>
                        <span itemProp="description"
                              class=' text-wrap element-animation '
                              style=" font-family: Circe-Regular, sans-serif;;
                                      {#overflow: hidden;#}
                                      {# display: -webkit-box;#}
                                      {# -webkit-line-clamp: 4; /* number of lines to show */#}
                                      {#         line-clamp: 4;#}
                                      {# -webkit-box-orient: vertical;#}
                                      ">{{ product.consimption }}</span>
                    </div>

                {% endif %}
                {#                    <div class="row">#}
                {#                        <div class="col-12 col-md-9 d-flex flex-column align-items-center">#}
                {#                            <h4>{{ product.description }}</h4>#}
                {#                            {% if product.packprices.all|length > 1 %}#}
                {#                                <span>Объем: </span>#}
                {#                                <div class="w-25 d-flex text-center justify-content-around align-items-center"#}
                {#                                     aria-label="{{ product.name }}">#}
                {##}
                {#                                    {% for weight in product.packprices.all %}#}
                {#                                        <button type="button"#}
                {#                                                data-id="{{ product.vendor_code }}plus{{ weight.id }}"#}
                {#                                                data-price="{{ weight.price }}"#}
                {#                                                class="weight-select-product-details-button"#}
                {#                                                style="width: 50px; height: 50px; {% if forloop.first %} background-color: #FF0000 {% else %} background-color: gray {% endif %}"#}
                {#                                        >{{ weight.weight }}</button>#}
                {##}
                {#                                    {% endfor %}#}
                {##}
                {##}
                {#                                </div>#}
                {#                            {% endif %}#}
                {#                        </div>#}
                {#                        <div class="col-12 col-md-3 flex-column d-flex align-items-center justify-content-around">#}
                {#                            <h2 class="w-100 text-center align-self-center fw-bold fs-1 price">{{ product.packprices.first.price }}#}
                {#                                р.</h2>#}
                {#                            <button type="submit" id="submit_btn"#}
                {#                                    class="btn btn-success details_to_cart_btn fs-3 add-to-cart-btn"#}
                {#                                    data-id="{{ product.vendor_code }}"#}
                {#                                    data-name="{{ product.name }}"#}
                {#                                    data-price="{{ product.packpricesprice }}"#}
                {#                                    data-weight="{{ product.packprices.first.id }}"#}
                {#                            >#}
                {#                                В корзину#}
                {#                            </button>#}
                {#                            <div id="cart-wrap-product-details"#}
                {#                                 class="text-center justify-item-end cart-qty-wrapper mb-1 "#}
                {#                                 data-id="{{ product.vendor_code }}">#}
                {#                                <button class="cart-minus to_cart_button fs-4 px-2"#}
                {#                                        data-id="{{ product.vendor_code }}"#}
                {#                                        data-weight="{{ packprices.first.id }}"> -#}
                {#                                </button>#}
                {#                                <i class="bi bi-basket"></i>#}
                {#                                <span#}
                {#                                        class="cart-qty fs-4 px-2"#}
                {#                                        data-id="{{ product.vendor_code }}"#}
                {#                                        data-weight=""#}
                {#                                >0</span>#}
                {#                                <button class="cart-plus  to_cart_button fs-4 px-2"#}
                {#                                        data-id="{{ product.vendor_code }}"#}
                {#                                        data-name="{{ product.name }}"#}
                {#                                        data-price="{{ product.price }}"#}
                {#                                        data-weight="{{ product.packprices.first.id }}"#}
                {#                                >+#}
                {#                                </button>#}
                {##}
                {#                            </div>#}
                {##}
                {#                        </div>#}
                {##}
                {#                    </div>#}
            </div>
        </div>

        {#        <section class="main-section" id="service">#}
        {#            <div class="container">#}
        {#                <h2>{{ product.name }}</h2>#}
        {#            </div>#}
        {#        </section>#}

        {#        <div class="row mb-4">#}

        {#            <div class="col-12 col-lg-9 featured-box-col2 wow fadeInRight delay-02s">#}
        {#                <h1#}
        {#                        style="   overflow: hidden;#}
        {#                                                       display: -webkit-box;#}
        {#                                                       -webkit-line-clamp: 2; /* number of lines to show */#}
        {#                                                               line-clamp: 2;#}
        {#                                                       -webkit-box-orient: vertical;"#}
        {##}
        {#                ><strong>{{ product.name }}</strong></h1>#}
        {#                <br>#}
        {#                <div class="container d-none d-md-flex w-100 product-description">#}
        {#                    <div class="w-75 me-5 d-flex flex-column align-items-center">#}
        {#                        <h4>{{ product.description }}</h4>#}
        {#                        {% if product.packprices.all|length > 1%}#}
        {##}
        {#                            <div class="w-25 d-flex text-center justify-content-around"#}
        {#                                 aria-label="{{ product.name }}">#}
        {#                                {% for weight in product.packprices.all %}#}
        {#                                    <button type="button"#}
        {#                                            data-id="{{ product.vendor_code }}plus{{ weight.id }}"#}
        {#                                            data-price="{{ weight.price }}"#}
        {#                                            class="btn btn-secondary weight-select-product-details-button"#}
        {#                                            style="font-size: 70%; {% if forloop.first %} background-color: pink {% else %} background-color: gray {%endif%}"#}
        {#                                    >{{ weight.weight }}</button>#}
        {##}
        {#                                {% endfor %}#}
        {##}
        {##}
        {#                            </div>#}
        {#                        {% endif %}#}
        {##}
        {#                    </div>#}
        {##}
        {#                    <div class="d-flex w-25 flex-column justify-content-around">#}
        {#                        <h2 class="w-100 text-center align-self-center fw-bold fs-1 price">{{ product.packprices.first.price }}#}
        {#                            р.</h2>#}
        {#                        <button type="submit" id="submit_btn" class="btn btn-success details_to_cart_btn fs-3 add-to-cart-btn"#}
        {#                                data-id="{{ product.vendor_code }}"#}
        {#                                data-name="{{ product.name }}"#}
        {#                                data-price="{{ product.packpricesprice }}"#}
        {#                                data-weight="{{ product.packprices.first.id }}"#}
        {#                        >#}
        {#                            В корзину#}
        {#                        </button>#}
        {#                        <div id="cart-wrap-product-details" class="text-center justify-item-end cart-qty-wrapper mb-1 "#}
        {#                             data-id="{{ product.vendor_code }}">#}
        {#                            <button class="cart-minus to_cart_button fs-4 px-2"#}
        {#                                    data-id="{{ product.vendor_code }}"#}
        {#                                    data-weight="{{ packprices.first.id }}"> -#}
        {#                            </button>#}
        {#                            <i class="bi bi-basket"></i>#}
        {#                            <span#}
        {#                                    class="cart-qty fs-4 px-2"#}
        {#                                    data-id="{{ product.vendor_code }}"#}
        {#                                    data-weight=""#}
        {#                            >0</span>#}
        {#                            <button class="cart-plus  to_cart_button fs-4 px-2"#}
        {#                                    data-id="{{ product.vendor_code }}"#}
        {#                                    data-name="{{ product.name }}"#}
        {#                                    data-price="{{ product.price }}"#}
        {#                                    data-weight="{{ product.packprices.first.id }}"#}
        {#                            >+#}
        {#                            </button>#}
        {##}
        {#                        </div>#}
        {##}
        {#                    </div>#}
        {#                </div>#}
        {##}
        {##}
        {#            </div>#}
        {#            <div class="container d-flex flex-column d-md-none align-items-center w-100 product-description">#}
        {#                <div class="w-75 me-5">#}
        {#                    <h4>{{ product.description }}</h4>#}
        {#                </div>#}
        {#                {% if product.packprices.all|length > 1%}#}
        {##}
        {#                    <div class="w-25 d-flex text-center justify-content-around"#}
        {#                         aria-label="{{ product.name }}">#}
        {#                        {% for weight in product.packprices.all %}#}
        {#                            <button type="button"#}
        {#                                    data-id="{{ product.vendor_code }}plus{{ weight.id }}"#}
        {#                                    data-price="{{ weight.price }}"#}
        {#                                    class="btn btn-secondary weight-select-product-details-button-small"#}
        {#                                    style="font-size: 70%; {% if forloop.first %} background-color: pink {% else %} background-color: gray {%endif%}"#}
        {#                            >{{ weight.weight }}</button>#}
        {##}
        {#                        {% endfor %}#}
        {##}
        {##}
        {#                    </div>#}
        {#                {% endif %}#}
        {##}
        {#            </div>#}
        {##}
        {#            <div class="d-flex flex-column d-flex d-md-none align-items-center justify-content-around">#}
        {#                    <h2 class="w-100 text-center align-self-center fw-bold fs-1 price">{{ product.packprices.first.price }}#}
        {#                        р.</h2>#}
        {#                    <button type="submit" id="submit_btn" class="btn btn-success details_to_cart_btn fs-3 add-to-cart-btn"#}
        {#                            data-id="{{ product.vendor_code }}"#}
        {#                            data-name="{{ product.name }}"#}
        {#                                data-price="{{ product.packpricesprice }}"#}
        {#                            data-weight="{{ product.packprices.first.id }}"#}
        {#                    >#}
        {#                        В корзину#}
        {#                    </button>#}
        {#                    <div id="cart-wrap-product-details" class="text-center justify-item-end cart-qty-wrapper mb-1 "#}
        {#                         data-id="{{ product.vendor_code }}">#}
        {#                        <button class="cart-minus to_cart_button fs-4 px-2"#}
        {#                                data-id="{{ product.vendor_code }}"#}
        {#                                data-weight="{{ packprices.first.id }}"> -#}
        {#                        </button>#}
        {#                        <i class="bi bi-basket"></i>#}
        {#                        <span#}
        {#                                class="cart-qty fs-4 px-2"#}
        {#                                data-id="{{ product.vendor_code }}"#}
        {#                                data-weight=""#}
        {#                        >0</span>#}
        {#                        <button class="cart-plus  to_cart_button fs-4 px-2"#}
        {#                                data-id="{{ product.vendor_code }}"#}
        {#                                data-name="{{ product.name }}"#}
        {#                                    data-price="{{ product.price }}"#}
        {#                                data-weight="{{ product.packprices.first.id }}"#}
        {#                        >+#}
        {#                        </button>#}
        {##}
        {#                    </div>#}
        {##}
        {#                </div>#}
        {##}
        {##}
        {#        </div>#}
    {% endif %}
{% endblock %}